(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f0d0c4"],{"0bca":function(t,s,e){"use strict";var a=e("619b"),i=e.n(a);i.a},"2f50":function(t,s,e){},"5f0b":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/products"}},[t._v("\n          產品列表\n          "),e("i",{staticClass:"fas fa-box-open"})])],1)])]),e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/categories"}},[t._v("\n          產品類別\n          "),e("i",{staticClass:"fas fa-align-justify"})])],1)])]),e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/coupons"}},[t._v("\n          優惠券\n          "),e("i",{staticClass:"fas fa-ticket-alt"})])],1)])]),e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/discounts"}},[t._v("\n          特價活動\n          "),e("i",{staticClass:"fas fa-tags"})])],1)])]),e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/orders"}},[t._v("\n          訂單列表\n          "),e("i",{staticClass:"far fa-list-alt"})])],1)])]),e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/users"}},[t._v("\n          會員管理\n          "),e("i",{staticClass:"fas fa-users-cog"})])],1)])])])},i=[],r=(e("0bca"),e("2877")),n={},o=Object(r["a"])(n,a,i,!1,null,"33f1f7a3",null);s["a"]=o.exports},"619b":function(t,s,e){},"860c":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container py-5"},[e("AdminNav"),e("table",{staticClass:"table mt-4"},[t._m(0),e("tbody",t._l(t.orders,function(s){return e("tr",{key:s.id},[e("th",{attrs:{scope:"row"}},[t._v(t._s(t._f("dateTime")(s.createdAt)))]),e("td",[t._v(t._s(s.name))]),e("td",[e("ul",{staticClass:"list-unstyled"},t._l(s.items,function(s){return e("li",{key:s.id},[t._v(t._s(s.name)+" QT："+t._s(s.OrderItem.quantity))])}),0)]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(s.total_amount)))]),e("td",[e("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEditing,expression:"!order.isEditing"}]},["1"===s.payment_status?e("strong",{staticClass:"text-success"},[t._v("已付款")]):e("span",{staticClass:"text-muted"},[t._v("尚未付款")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.isEditing,expression:"order.isEditing"}]},[e("select",{directives:[{name:"model",rawName:"v-model",value:s.payment_status,expression:"order.payment_status"}],staticClass:"form-control",attrs:{id:"payment_status",name:"payment_status",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(s,"payment_status",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請確認--")]),e("option",{attrs:{value:"0"}},[t._v("尚未付款")]),e("option",{attrs:{value:"1"}},[t._v("已付款")])])])]),e("td",[e("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEditing,expression:"!order.isEditing"}]},["0"===s.shipping_status?e("strong",{staticClass:"text-muted"},[t._v("處理中")]):"1"===s.shipping_status?e("strong",{staticClass:"text-danger"},[t._v("配送中")]):"2"===s.shipping_status?e("strong",{staticClass:"text-success"},[t._v("已到貨")]):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.isEditing,expression:"order.isEditing"}]},[e("select",{directives:[{name:"model",rawName:"v-model",value:s.shipping_status,expression:"order.shipping_status"}],staticClass:"form-control",attrs:{id:"shipping_status",name:"shipping_status",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(s,"shipping_status",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請選擇--")]),e("option",{attrs:{value:"0"}},[t._v("處理中")]),e("option",{attrs:{value:"1"}},[t._v("配送中")]),e("option",{attrs:{value:"2"}},[t._v("已到貨")])])])]),e("td",[e("button",{directives:[{name:"show",rawName:"v-show",value:!s.isEditing,expression:"!order.isEditing"}],staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleIsEditing(s.id)}}},[t._v("\n            狀態管理\n            "),e("i",{staticClass:"fas fa-file-invoice-dollar"})]),e("button",{directives:[{name:"show",rawName:"v-show",value:s.isEditing,expression:"order.isEditing"}],staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.updateOrder({orderId:s.id,payment_status:s.payment_status,shipping_status:s.shipping_status})}}},[t._v("\n            Check\n            "),e("i",{staticClass:"fas fa-check"})]),e("router-link",{staticClass:"btn btn-link",attrs:{to:{name:"admin-order",params:{orderId:s.id}}}},[t._v("\n            詳情\n            "),e("i",{staticClass:"fas fa-external-link-square-alt"})])],1)])}),0)])],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("購買時間")]),e("th",{attrs:{scope:"col"}},[t._v("購買者")]),e("th",{attrs:{scope:"col"}},[t._v("購買款項")]),e("th",{attrs:{scope:"col"}},[t._v("應付金額")]),e("th",{attrs:{scope:"col"}},[t._v("是否付款")]),e("th",{attrs:{scope:"col"}},[t._v("出貨狀態")]),e("th",{attrs:{scope:"col"}},[t._v("訂單")])])])}],r=(e("8e6e"),e("ac6a"),e("456d"),e("bd86")),n=(e("96cf"),e("3b8d")),o=e("5f0b"),c=e("2708"),l=e("2fa3");function d(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,a)}return e}function u(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?d(e,!0).forEach(function(s){Object(r["a"])(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(e).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}var p={components:{AdminNav:o["a"]},mixins:[c["b"],c["a"]],data:function(){return{orders:[]}},created:function(){this.fetchOrders()},methods:{fetchOrders:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var s,e,a,i,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s=this,e="https://ec-website-api.herokuapp.com/api/admin/orders",t.next=5,s.axios.get(e);case 5:if(a=t.sent,i=a.data,r=a.statusText,"OK"===r){t.next=10;break}throw new Error(r);case 10:s.orders=i.orders.map(function(t){return u({},t,{isEditing:!1})}),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),l["Toast"].fire({type:"error",title:"無法取得訂單，請稍後再試"});case 16:case"end":return t.stop()}},t,this,[[0,13]])}));function s(){return t.apply(this,arguments)}return s}(),updateOrder:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(s){var e,a,i,r,n,o,c,d,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=s.orderId,a=s.payment_status,i=s.shipping_status,t.prev=1,r=this,n="https://ec-website-api.herokuapp.com/api/admin/orders/".concat(e),o={payment_status:a,shipping_status:i},t.next=7,r.axios.put(n,o);case 7:if(c=t.sent,d=c.data,u=c.statusText,"OK"===u&&"success"===d.status){t.next=12;break}throw new Error(u);case 12:this.toggleIsEditing(e),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),l["Toast"].fire({type:"error",title:"無法更新金流狀態，請稍後再試"});case 18:case"end":return t.stop()}},t,this,[[1,15]])}));function s(s){return t.apply(this,arguments)}return s}(),toggleIsEditing:function(t){var s=this;s.orders=s.orders.map(function(s){return s.id!==t?s:u({},s,{isEditing:!s.isEditing})})}}},v=p,f=(e("d066"),e("2877")),m=Object(f["a"])(v,a,i,!1,null,"0b204dd6",null);s["default"]=m.exports},d066:function(t,s,e){"use strict";var a=e("2f50"),i=e.n(a);i.a}}]);
//# sourceMappingURL=chunk-20f0d0c4.f600c763.js.map