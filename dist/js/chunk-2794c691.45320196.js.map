{"version":3,"sources":["webpack:///./src/components/admin/AdminDiscountForm.vue?15fb","webpack:///src/components/admin/AdminDiscountForm.vue","webpack:///./src/components/admin/AdminDiscountForm.vue?1016","webpack:///./src/components/admin/AdminDiscountForm.vue","webpack:///./src/apis/admin/adminDiscount.js","webpack:///./src/views/admin/AdminDiscountEdit.vue?7217","webpack:///src/views/admin/AdminDiscountEdit.vue","webpack:///./src/views/admin/AdminDiscountEdit.vue?6e72","webpack:///./src/views/admin/AdminDiscountEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","submit","$event","stopPropagation","preventDefault","handleSubmit","staticClass","attrs","for","_v","directives","name","rawName","value","discount","expression","id","type","placeholder","required","domProps","input","target","composing","$set","modifiers","number","_n","blur","$forceUpdate","rows","checked","_q","shipping_free","change","disabled","isProcessing","_s","staticRenderFns","AdminDiscountFormvue_type_script_lang_js_","props","initialDiscount","Object","default","Boolean","data","description","target_price","percent","product_reduce","start_date","end_date","isLoading","watch","_objectSpread","created","methods","e","form","formData","FormData","$emit","helpers","fire","title","admin_AdminDiscountFormvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_utils_helpers__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","getDiscounts","apiHelper","get","getDiscount","discountId","concat","postDiscount","post","putDiscount","put","deleteDiscount","delete","is-processing","initial-discount","after-submit","handleAfterSubmit","AdminDiscountEditvue_type_script_lang_js_","components","AdminDiscountForm","$route","params","fetchdiscount","beforeRouteUpdate","to","from","next","_fetchdiscount","asyncToGenerator","regeneratorRuntime","mark","_callee","vm","_ref","statusText","wrap","_context","prev","adminDiscount","sent","Error","t0","stop","_x","apply","arguments","_handleAfterSubmit","_callee2","_ref2","_context2","status","$router","push","_x2","admin_AdminDiscountEditvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-2794c691.45320196.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.discount.name),expression:\"discount.name\"}],staticClass:\"form-control\",attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"placeholder\":\"Enter name\",\"required\":\"\"},domProps:{\"value\":(_vm.discount.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.discount, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"target_price\"}},[_vm._v(\"消費額度\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.discount.target_price),expression:\"discount.target_price\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"id\":\"target_price\",\"type\":\"number\",\"name\":\"target_price\"},domProps:{\"value\":(_vm.discount.target_price)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.discount, \"target_price\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"percent\"}},[_vm._v(\"折扣 % 數\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.discount.percent),expression:\"discount.percent\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"id\":\"percent\",\"type\":\"number\",\"name\":\"percent\"},domProps:{\"value\":(_vm.discount.percent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.discount, \"percent\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"product_reduce\"}},[_vm._v(\"折抵費用\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.discount.product_reduce),expression:\"discount.product_reduce\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"id\":\"product_reduce\",\"type\":\"number\",\"name\":\"product_reduce\"},domProps:{\"value\":(_vm.discount.product_reduce)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.discount, \"product_reduce\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"description\"}},[_vm._v(\"Description\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.discount.description),expression:\"discount.description\"}],staticClass:\"form-control\",attrs:{\"id\":\"description\",\"rows\":\"3\",\"name\":\"description\"},domProps:{\"value\":(_vm.discount.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.discount, \"description\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"form-check form-check-inline\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.discount.shipping_free),expression:\"discount.shipping_free\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"id\":\"shipping_free1\",\"name\":\"shipping_free\"},domProps:{\"value\":1,\"checked\":_vm._q(_vm.discount.shipping_free,1)},on:{\"change\":function($event){return _vm.$set(_vm.discount, \"shipping_free\", 1)}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"shipping_free1\"}},[_vm._v(\"免運費\")])]),_c('div',{staticClass:\"form-check form-check-inline\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.discount.shipping_free),expression:\"discount.shipping_free\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"id\":\"shipping_free2\",\"name\":\"shipping_free\"},domProps:{\"value\":0,\"checked\":_vm._q(_vm.discount.shipping_free,0)},on:{\"change\":function($event){return _vm.$set(_vm.discount, \"shipping_free\", 0)}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"shipping_free2\"}},[_vm._v(\"需運費\")])])]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(_vm._s(_vm.isProcessing ? \"處理中...\" : \"上傳折扣活動\"))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form @submit.stop.prevent=\"handleSubmit\">\n    <div class=\"form-group\">\n      <label for=\"name\">Name</label>\n      <input\n        id=\"name\"\n        v-model=\"discount.name\"\n        type=\"text\"\n        class=\"form-control\"\n        name=\"name\"\n        placeholder=\"Enter name\"\n        required\n      />\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"target_price\">消費額度</label>\n      <input\n        id=\"target_price\"\n        v-model.number=\"discount.target_price\"\n        type=\"number\"\n        class=\"form-control\"\n        name=\"target_price\"\n      />\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"percent\">折扣 % 數</label>\n      <input\n        id=\"percent\"\n        v-model.number=\"discount.percent\"\n        type=\"number\"\n        class=\"form-control\"\n        name=\"percent\"\n      />\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"product_reduce\">折抵費用</label>\n      <input\n        id=\"product_reduce\"\n        v-model.number=\"discount.product_reduce\"\n        type=\"number\"\n        class=\"form-control\"\n        name=\"product_reduce\"\n      />\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"description\">Description</label>\n      <textarea\n        id=\"description\"\n        v-model=\"discount.description\"\n        class=\"form-control\"\n        rows=\"3\"\n        name=\"description\"\n      />\n    </div>\n\n    <!-- <div class=\"form-group\">\n      <label for=\"start_date\">有效日期</label>\n      <input\n        id=\"start_date\"\n        v-model=\"discount.start_date\"\n        type=\"date\"\n        class=\"form-control\"\n        name=\"start_date\"\n      />\n    </div>-->\n\n    <!-- <div class=\"form-group\">\n      <label for=\"end_date\">有效日期</label>\n      <input\n        id=\"end_date\"\n        v-model=\"discount.end_date\"\n        type=\"date\"\n        class=\"form-control\"\n        name=\"end_date\"\n      />\n    </div>-->\n\n    <div class=\"form-group\">\n      <div class=\"form-check form-check-inline\">\n        <input\n          class=\"form-check-input\"\n          type=\"radio\"\n          :value=\"1\"\n          v-model=\"discount.shipping_free\"\n          id=\"shipping_free1\"\n          name=\"shipping_free\"\n        />\n        <label class=\"form-check-label\" for=\"shipping_free1\">免運費</label>\n      </div>\n\n      <div class=\"form-check form-check-inline\">\n        <input\n          class=\"form-check-input\"\n          type=\"radio\"\n          :value=\"0\"\n          v-model=\"discount.shipping_free\"\n          id=\"shipping_free2\"\n          name=\"shipping_free\"\n        />\n        <label class=\"form-check-label\" for=\"shipping_free2\">需運費</label>\n      </div>\n    </div>\n\n    <button\n      type=\"submit\"\n      class=\"btn btn-primary\"\n      :disabled=\"isProcessing\"\n    >{{ isProcessing ? \"處理中...\" : \"上傳折扣活動\" }}</button>\n  </form>\n</template>\n\n<script>\nimport { Toast } from '@/utils/helpers'\n\nexport default {\n  props: {\n    initialDiscount: {\n      type: Object,\n      default: () => ({})\n    },\n    isProcessing: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      discount: {\n        name: '',\n        description: '',\n        target_price: 0,\n        percent: 0,\n        product_reduce: 0,\n        shipping_free: 0,\n        start_date: '',\n        end_date: ''\n      },\n      isLoading: true\n    }\n  },\n  watch: {\n    initialDiscount(discount) {\n      this.discount = {\n        ...this.discount,\n        ...discount\n      }\n    }\n  },\n  created() {\n    this.discount = {\n      ...this.discount,\n      ...this.initialDiscount\n    }\n  },\n  methods: {\n    handleSubmit(e) {\n      if (!this.discount.name) {\n        Toast.fire({\n          type: 'warning',\n          title: '請填寫 discount 名稱'\n        })\n        return\n      } else if (!this.discount.target_price) {\n        Toast.fire({\n          type: 'warning',\n          title: '請填寫消費額度'\n        })\n        return\n      }\n\n      const form = e.target\n      const formData = new FormData(form)\n      this.$emit('after-submit', formData)\n    }\n  }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDiscountForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDiscountForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminDiscountForm.vue?vue&type=template&id=4879dd90&\"\nimport script from \"./AdminDiscountForm.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminDiscountForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {\n  apiHelper\n}\nfrom '@/utils/helpers'\n\nexport default {\n  getDiscounts() {\n    return apiHelper.get(`/admin/discounts`)\n  },\n  getDiscount(discountId) {\n    return apiHelper.get(`/admin/discounts/${discountId}`)\n  },\n  postDiscount(formData) {\n    return apiHelper.post(`/admin/discounts`, formData)\n  },\n  putDiscount(discountId, formData) {\n    return apiHelper.put(`/admin/discounts/${discountId}`, formData)\n  },\n  deleteDiscount(discountId) {\n    return apiHelper.delete(`/admin/discounts/${discountId}`)\n  },\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('AdminDiscountForm',{attrs:{\"is-processing\":_vm.isProcessing,\"initial-discount\":_vm.discount},on:{\"after-submit\":_vm.handleAfterSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container py-5\">\n    <AdminDiscountForm\n      :is-processing=\"isProcessing\"\n      :initial-discount=\"discount\"\n      @after-submit=\"handleAfterSubmit\"\n    />\n  </div>\n</template>\n\n<script>\nimport adminDiscountAPI from '@/apis/admin/adminDiscount'\nimport AdminDiscountForm from '@/components/admin/AdminDiscountForm.vue'\n\nimport { Toast } from '@/utils/helpers'\n\nexport default {\n  components: {\n    AdminDiscountForm\n  },\n  data() {\n    return {\n      discount: {},\n      isProcessing: false\n    }\n  },\n  created() {\n    const { discountId } = this.$route.params\n    this.fetchdiscount(discountId)\n  },\n  beforeRouteUpdate(to, from, next) {\n    const { discountId } = to.params\n    this.fetchdiscount(discountId)\n    next()\n  },\n  methods: {\n    async fetchdiscount(discountId) {\n      try {\n        const vm = this\n\n        const { data, statusText } = await adminDiscountAPI.getDiscount(discountId)\n\n        if (statusText !== 'OK') {\n          throw new Error(statusText)\n        }\n\n        vm.discount = data.discount\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法取得 discount 資料，請稍後再試'\n        })\n      }\n    },\n    async handleAfterSubmit(formData) {\n      try {\n        const vm = this\n\n        vm.isProcessing = true\n        const { data, statusText } = await adminDiscountAPI.getDiscount(vm.discount.id, formData)\n\n        if (statusText !== 'OK' || data.status !== 'success') {\n          throw new Error(statusText)\n        }\n\n        vm.$router.push({ name: 'admin-discounts' })\n      } catch (error) {\n        this.isProcessing = false\n        Toast.fire({\n          type: 'error',\n          title: '無法編輯 discount，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDiscountEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminDiscountEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminDiscountEdit.vue?vue&type=template&id=24c6b50e&\"\nimport script from \"./AdminDiscountEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminDiscountEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}