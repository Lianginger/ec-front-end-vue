{"version":3,"sources":["webpack:///./src/views/Product.vue?b68f","webpack:///./src/components/ProductDetail.vue?b5e1","webpack:///src/components/ProductDetail.vue","webpack:///./src/components/ProductDetail.vue?4d6c","webpack:///./src/components/ProductDetail.vue","webpack:///src/views/Product.vue","webpack:///./src/views/Product.vue?880b","webpack:///./src/views/Product.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","initial-cart","cart","on","clickDeleteItem","handleDeleteItem","initial-product","product","clickAddToCart","handleAddToCart","staticRenderFns","ProductDetailvue_type_template_id_15d1d273_render","_v","_s","staticStyle","width","padding-bottom","background-position","background-repeat","background-size","style","background-image","image","description","origin_price","sell_price","submit","$event","stopPropagation","preventDefault","type","min","domProps","input","target","composing","productQuantity","_m","cursor","click","$router","go","ProductDetailvue_type_template_id_15d1d273_staticRenderFns","ProductDetailvue_type_script_lang_js_","props","initialProduct","Object","required","data","watch","methods","$emit","id","parseInt","components_ProductDetailvue_type_script_lang_js_","component","componentNormalizer","ProductDetail","Productvue_type_script_lang_js_","components","SideCartPreview","showSideCart","$route.params.productId","productId","fetchProduct","created","$route","params","mounted","_this","$root","$on","_fetchProduct","asyncToGenerator","regeneratorRuntime","mark","_callee","vm","response","wrap","_context","prev","next","products","getProduct","sent","statusText","Error","$store","commit","items","length","t0","helpers","fire","title","stop","_x","apply","arguments","_handleAddToCart","_callee2","quantity","_context2","addToCart","_x2","_x3","_handleDeleteItem","_callee3","cartId","cartItemId","_ref","_context3","deleteItem","_x4","_x5","views_Productvue_type_script_lang_js_","Product_component","__webpack_exports__"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,kBAAkB,CAACG,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOV,EAAgB,aAAEW,WAAW,iBAAiBC,MAAM,CAACC,eAAeb,EAAIc,MAAMC,GAAG,CAACC,gBAAkBhB,EAAIiB,oBAAoBb,EAAG,gBAAgB,CAACQ,MAAM,CAACM,kBAAkBlB,EAAImB,SAASJ,GAAG,CAACK,eAAiBpB,EAAIqB,oBAAoB,IAC/aC,EAAkB,G,4DCDlBC,EAAS,WAAa,IAAIvB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,yBAAyB,CAACN,EAAIwB,GAAGxB,EAAIyB,GAAGzB,EAAImB,QAAQX,SAASJ,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACsB,YAAY,CAACC,MAAQ,OAAOC,iBAAiB,OAAOC,sBAAsB,SAASC,oBAAoB,YAAYC,kBAAkB,SAASC,MAAM,CAAGC,mBAAoB,OAASjC,EAAImB,QAAQe,MAAQ,WAAa9B,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,IAAI,CAACJ,EAAIwB,GAAGxB,EAAIyB,GAAGzB,EAAImB,QAAQgB,gBAAgB/B,EAAG,MAAMA,EAAG,OAAO,CAACE,YAAY,sDAAsD,CAACN,EAAIwB,GAAG,OAAOxB,EAAIyB,GAAGzB,EAAImB,QAAQiB,cAAc,QAAQhC,EAAG,KAAK,CAACE,YAAY,yDAAyD,CAACN,EAAIwB,GAAG,OAAOxB,EAAIyB,GAAGzB,EAAImB,QAAQkB,YAAY,QAAQjC,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,OAAO,CAACW,GAAG,CAACuB,OAAS,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBzC,EAAIqB,gBAAgBkB,MAAW,CAACnC,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACG,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOV,EAAmB,gBAAEW,WAAW,oBAAoBL,YAAY,eAAeM,MAAM,CAAC8B,KAAO,SAASlC,KAAO,WAAWmC,IAAM,KAAKC,SAAS,CAAClC,MAASV,EAAmB,iBAAGe,GAAG,CAAC8B,MAAQ,SAASN,GAAWA,EAAOO,OAAOC,YAAqB/C,EAAIgD,gBAAgBT,EAAOO,OAAOpC,WAAUV,EAAIiD,GAAG,SAAS7C,EAAG,IAAI,CAACE,YAAY,eAAeoB,YAAY,CAACwB,OAAS,WAAWnC,GAAG,CAACoC,MAAQ,SAASZ,GAAQ,OAAOvC,EAAIoD,QAAQC,IAAI,MAAM,CAACrD,EAAIwB,GAAG,iBAC/iD8B,EAAkB,CAAC,WAAa,IAAItD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,SAAS,CAACE,YAAY,sBAAsBM,MAAM,CAAC8B,KAAO,WAAW,CAAC1C,EAAIwB,GAAG,eC2CvO+B,EAAA,CACEC,MAAO,CACLC,eAAgB,CACdf,KAAMgB,OACNC,UAAU,IAGdC,KAPF,WAQI,MAAO,CACLZ,gBAAiB,EACjB7B,QAASlB,KAAKwD,iBAGlBI,MAAO,CACLJ,eAAgB,WACdxD,KAAKkB,QAAUlB,KAAKwD,iBAGxBK,QAAS,CACPzC,gBADJ,WAEMpB,KAAK8D,MAAM,iBAAkB9D,KAAKkB,QAAQ6C,GAAIC,SAAShE,KAAK+C,qBChEqRkB,EAAA,E,YCOnVC,EAAYT,OAAAU,EAAA,KAAAV,CACdQ,EACA3C,EACA+B,GACA,EACA,KACA,KACA,MAIae,EAAAF,E,oBCAfG,EAAA,CACEC,WAAY,CACVF,cAAJA,EACIG,gBAAJA,EAAA,MAEEZ,KALF,WAMI,MAAO,CACLzC,QAAS,GACTL,KAAM,GACN2D,cAAc,IAGlBZ,MAAO,CACLa,0BAA2B,SAA/BC,GACM1E,KAAK2E,aAAaD,KAGtBE,QAjBF,WAkBI,IAAJF,EAAA1E,KAAA6E,OAAAC,OAAAJ,UACI1E,KAAK2E,aAAaD,IAEpBK,QArBF,WAqBA,IAAAC,EAAAhF,KACIA,KAAKiF,MAAMC,IAAI,iBAAkB,WAC/BF,EAANR,cAAAQ,EAAAR,gBAGEX,QAAS,CACPc,aADJ,eAAAQ,EAAA1B,OAAA2B,EAAA,KAAA3B,CAAA4B,mBAAAC,KAAA,SAAAC,EACAb,GADA,IAAAc,EAAAC,EAAA,OAAAJ,mBAAAK,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAGAJ,EAAAxF,KAHA2F,EAAAE,KAAA,EAIAC,EAAA,KAAAC,WAAArB,GAJA,UAIAe,EAJAE,EAAAK,KAMA,OAAAP,EAAAQ,WANA,CAAAN,EAAAE,KAAA,cAOA,IAAAK,MAAAT,EAAAQ,YAPA,OAUAT,EAAAtE,QAAAuE,EAAA9B,KAAAzC,QACAsE,EAAA3E,KAAA4E,EAAA9B,KAAA9C,KACA2E,EAAAW,OAAAC,OAAA,0BAAAX,EAAA9B,KAAA9C,KAAAwF,MAAAC,QAZAX,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAY,GAAAZ,EAAA,YAcAa,EAAA,SAAAC,KAAA,CACAhE,KAAA,QACAiE,MAAA,qBAhBA,yBAAAf,EAAAgB,SAAApB,EAAAvF,KAAA,sBAAA2E,EAAAiC,GAAA,OAAAzB,EAAA0B,MAAA7G,KAAA8G,WAAA,OAAAnC,EAAA,GAoBIvD,gBApBJ,eAAA2F,EAAAtD,OAAA2B,EAAA,KAAA3B,CAAA4B,mBAAAC,KAAA,SAAA0B,EAoBAtC,EAAAuC,GApBA,IAAAzB,EAAAC,EAAA,OAAAJ,mBAAAK,KAAA,SAAAwB,GAAA,eAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,cAAAqB,EAAAtB,KAAA,EAsBAJ,EAAAxF,KAtBAkH,EAAArB,KAAA,EAwBAhF,EAAA,KAAAsG,UAAAzC,EAAAuC,GAxBA,UAwBAxB,EAxBAyB,EAAAlB,KA0BA,OAAAP,EAAAQ,WA1BA,CAAAiB,EAAArB,KAAA,cA2BA,IAAAK,MAAAT,EAAAQ,YA3BA,OA8BAO,EAAA,SAAAC,KAAA,CACAhE,KAAA,UACAiE,MAAA,eAGAlB,EAAAb,aAAAD,GAnCAwC,EAAArB,KAAA,iBAAAqB,EAAAtB,KAAA,GAAAsB,EAAAX,GAAAW,EAAA,YAqCAV,EAAA,SAAAC,KAAA,CACAhE,KAAA,QACAiE,MAAA,kBAvCA,yBAAAQ,EAAAP,SAAAK,EAAAhH,KAAA,sBAAAoB,EAAAgG,EAAAC,GAAA,OAAAN,EAAAF,MAAA7G,KAAA8G,WAAA,OAAA1F,EAAA,GA2CIJ,iBA3CJ,eAAAsG,EAAA7D,OAAA2B,EAAA,KAAA3B,CAAA4B,mBAAAC,KAAA,SAAAiC,EA2CAC,EAAAC,GA3CA,IAAAjC,EAAAd,EAAAgD,EAAAzB,EAAA,OAAAZ,mBAAAK,KAAA,SAAAiC,GAAA,eAAAA,EAAA/B,KAAA+B,EAAA9B,MAAA,cAAA8B,EAAA/B,KAAA,EA6CAJ,EAAAxF,KACA0E,EAAAc,EAAAX,OAAAC,OAAAJ,UA9CAiD,EAAA9B,KAAA,EAgDAC,EAAA,KAAA8B,WAAAJ,EAAAC,GAhDA,UAAAC,EAAAC,EAAA3B,KAgDAC,EAhDAyB,EAgDAzB,WAEA,OAAAA,EAlDA,CAAA0B,EAAA9B,KAAA,cAmDA,IAAAK,MAAAD,GAnDA,OAsDAT,EAAAb,aAAAD,GAtDAiD,EAAA9B,KAAA,iBAAA8B,EAAA/B,KAAA,GAAA+B,EAAApB,GAAAoB,EAAA,YAwDAnB,EAAA,SAAAC,KAAA,CACAhE,KAAA,QACAiE,MAAA,oBA1DA,yBAAAiB,EAAAhB,SAAAY,EAAAvH,KAAA,sBAAAgB,EAAA6G,EAAAC,GAAA,OAAAR,EAAAT,MAAA7G,KAAA8G,WAAA,OAAA9F,EAAA,KC5CiV+G,EAAA,ECO7UC,EAAYvE,OAAAU,EAAA,KAAAV,CACdsE,EACAjI,EACAuB,GACA,EACA,KACA,KACA,MAIa4G,EAAA,WAAAD,E","file":"js/chunk-2d21de4f.064950b0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('SideCartPreview',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSideCart),expression:\"showSideCart\"}],attrs:{\"initial-cart\":_vm.cart},on:{\"clickDeleteItem\":_vm.handleDeleteItem}}),_c('ProductDetail',{attrs:{\"initial-product\":_vm.product},on:{\"clickAddToCart\":_vm.handleAddToCart}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',{staticClass:\"py-3 font-weight-bold\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4 mb-5\"},[_c('div',{staticClass:\"w-100\"},[_c('div',{staticStyle:{\"width\":\"100%\",\"padding-bottom\":\"100%\",\"background-position\":\"center\",\"background-repeat\":\"no-repeat\",\"background-size\":\"cover\"},style:({ 'background-image': 'url(' + _vm.product.image + ')' })})])]),_c('div',{staticClass:\"col-md-8\"},[_c('p',[_vm._v(_vm._s(_vm.product.description))]),_c('hr'),_c('span',{staticClass:\"float-right text-secondary card-text text-truncate\"},[_vm._v(\"原價$ \"+_vm._s(_vm.product.origin_price)+\" 元\")]),_c('h5',{staticClass:\"card-text text-truncate font-weight-bold text-success\"},[_vm._v(\"NT$ \"+_vm._s(_vm.product.sell_price)+\" 元\")]),_c('div',{staticClass:\"addToCart text-right py-5\"},[_c('form',{on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleAddToCart($event)}}},[_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.productQuantity),expression:\"productQuantity\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"name\":\"quantity\",\"min\":\"1\"},domProps:{\"value\":(_vm.productQuantity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.productQuantity=$event.target.value}}}),_vm._m(0)])])]),_c('a',{staticClass:\"text-primary\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"回前一頁\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-danger px-5\",attrs:{\"type\":\"submit\"}},[_vm._v(\"加入購物車\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h1 class=\"py-3 font-weight-bold\">{{product.name}}</h1>\n    <div class=\"row\">\n      <div class=\"col-md-4 mb-5\">\n        <div class=\"w-100\">\n          <div\n            style=\"width: 100%;padding-bottom: 100%;background-position: center;background-repeat: no-repeat;background-size: cover\"\n            :style=\"{ 'background-image': 'url(' + product.image + ')' }\"\n          ></div>\n        </div>\n      </div>\n      <div class=\"col-md-8\">\n        <p>{{product.description}}</p>\n        <hr />\n        <span\n          class=\"float-right text-secondary card-text text-truncate\"\n        >原價$ {{ product.origin_price }} 元</span>\n        <h5\n          class=\"card-text text-truncate font-weight-bold text-success\"\n        >NT$ {{ product.sell_price }} 元</h5>\n        <div class=\"addToCart text-right py-5\">\n          <form @submit.stop.prevent=\"handleAddToCart\">\n            <div class=\"input-group\">\n              <input\n                v-model=\"productQuantity\"\n                type=\"number\"\n                name=\"quantity\"\n                class=\"form-control\"\n                min=\"1\"\n              />\n              <div class=\"input-group-append\">\n                <button type=\"submit\" class=\"btn btn-danger px-5\">加入購物車</button>\n              </div>\n            </div>\n          </form>\n        </div>\n        <a class=\"text-primary\" style=\"cursor: pointer\" @click=\"$router.go(-1)\">回前一頁</a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    initialProduct: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      productQuantity: 1,\n      product: this.initialProduct\n    }\n  },\n  watch: {\n    initialProduct: function () {\n      this.product = this.initialProduct\n    }\n  },\n  methods: {\n    handleAddToCart () {\n      this.$emit('clickAddToCart', this.product.id, parseInt(this.productQuantity))\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductDetail.vue?vue&type=template&id=15d1d273&\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"container py-5\">\n    <SideCartPreview\n      :initial-cart=\"cart\"\n      v-show=\"showSideCart\"\n      @clickDeleteItem=\"handleDeleteItem\"\n    />\n    <ProductDetail :initial-product=\"product\" @clickAddToCart=\"handleAddToCart\" />\n  </div>\n</template>\n\n<script>\nimport { Toast } from '@/utils/helpers'\nimport productsAPI from '@/apis/products'\nimport cartAPI from '@/apis/cart'\nimport ProductDetail from '../components/ProductDetail'\nimport SideCartPreview from '../components/SideCartPreview'\n\nexport default {\n  components: {\n    ProductDetail,\n    SideCartPreview\n  },\n  data () {\n    return {\n      product: {},\n      cart: {},\n      showSideCart: false\n    }\n  },\n  watch: {\n    '$route.params.productId': function (productId) {\n      this.fetchProduct(productId)\n    }\n  },\n  created () {\n    const productId = this.$route.params.productId\n    this.fetchProduct(productId)\n  },\n  mounted () {\n    this.$root.$on('toggleSideCart', () => {\n      this.showSideCart = !this.showSideCart\n    })\n  },\n  methods: {\n    async fetchProduct (productId) {\n      try {\n        const vm = this\n        const response = await productsAPI.getProduct(productId)\n\n        if (response.statusText !== 'OK') {\n          throw new Error(response.statusText)\n        }\n\n        vm.product = response.data.product\n        vm.cart = response.data.cart\n        vm.$store.commit('setNavbarCartItemNumber', response.data.cart.items.length)\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法取得單一商品資料，請稍後再試'\n        })\n      }\n    },\n    async handleAddToCart (productId, quantity) {\n      try {\n        const vm = this\n\n        const response = await cartAPI.addToCart(productId, quantity)\n\n        if (response.statusText !== 'OK') {\n          throw new Error(response.statusText)\n        }\n\n        Toast.fire({\n          type: 'success',\n          title: '商品成功加入購物車！'\n        })\n\n        vm.fetchProduct(productId)\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法加入購物車，請稍後再試'\n        })\n      }\n    },\n    async handleDeleteItem (cartId, cartItemId) {\n      try {\n        const vm = this\n        const productId = vm.$route.params.productId\n\n        const { statusText } = await productsAPI.deleteItem(cartId, cartItemId)\n\n        if (statusText !== 'OK') {\n          throw new Error(statusText)\n        }\n\n        vm.fetchProduct(productId)\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法刪除購物車商品，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Product.vue?vue&type=template&id=072a08f8&\"\nimport script from \"./Product.vue?vue&type=script&lang=js&\"\nexport * from \"./Product.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}